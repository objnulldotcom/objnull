@using MVCWeb;
@using MVCWeb.Model.Models;
@{
    List<NewBeeFloor> NewBeeFloorList = ViewBag.NewBeeFloorList as List<NewBeeFloor>;
}

@foreach (NewBeeFloor floor in NewBeeFloorList)
{
    string userName = string.IsNullOrEmpty(floor.Owner.Name) ? floor.Owner.GitHubLogin : floor.Owner.Name;
    <div class="row">
        <div class="col-md-1">
            <a><img class="img-rounded" src="@floor.Owner.AvatarUrl&s=96" height="32" width="32" alt="@userName"></a>
        </div>
        <div class="col-md-8" id="Comment@(floor.Order)" cmid="@floor.ID">
            @Html.Raw(floor.MDValue)
        </div>
    </div>
    <div class="row">
        <div class="col-md-12" style="line-height: 32px;margin-top: -10px">
            <a>@userName</a>
            <span class="fs2"> at <span class="glyphicon glyphicon-time"></span>@floor.InsertDate.ToString("yyyy-MM-dd HH:mm")</span>
            <a id="ShowReply@(floor.Order)" href="javascript:;" style="text-decoration:none" onclick="ShowReply(@floor.Order, 1)" recount="@floor.ReplyCount">
                @if (floor.ReplyCount > 0)
                { @Html.Raw(floor.ReplyCount + "条回复") }
                else if (ViewBag.Login)
                { @Html.Raw("回复") }
            </a>
        </div>

    </div>

    <div id="ReplyBox@(floor.Order)" class="row" style="padding-left: 40px; display:none;margin-top:10px">
        <div id="Replys@(floor.Order)"></div>
        <div id="ReplyPager@(floor.Order)" class="col-md-12 text-center" style="margin: -15px 0px">
        </div>
        @if (ViewBag.Login)
        {
            <div class="col-md-11">
                <div class="input-group">
                    <div class="input-group-addon">
                        <span id="ReplyToUser@(floor.Order)">@@@userName </span>
                        <a id="DefaultUser@(floor.Order)" href="javascript:;" style="display:none" onclick="ReplyDefault(@floor.Order,'@userName','@floor.Owner.ID')"><span class="badge">x</span></a>
                    </div>
                    <input id="ReplyTxt@(floor.Order)" type="text" class="form-control" touser="@floor.OwnerID" />
                </div>
            </div>
                <div class="col-md-1">
                    <button class="btn btn-default" onclick="AddReply(@floor.Order)">确定</button>
                </div>
        }
    </div>
}
<input type="hidden" id="TotalCount" value="@ViewBag.TotalCount" />
<input type="hidden" id="CurrentPage" value="@ViewBag.CurrentPage" />
